# ì±…ì„ í• ë‹¹í•˜ê¸°

## ì†Œê°

```
í”„ë¡œì‹œì € ì¶”ìƒí™”ë¼ëŠ” ìš©ì–´ê°€ ì´ìƒí•˜ê²Œ ì“°ì´ëŠ”ê²ƒ ê°™ë‹¤.
```

## ì„œë¡ 

> 4ì¥ìš”ì•½ - ë°ì´í„° ì¤‘ì‹¬ ì„¤ê³„ëŠ” ìº¡ìŠí™”ë¥¼ ìœ„ë°˜í•˜ê¸° ì‰½ê³ , ê²°í•©ë„ê°€ ë†’ì•„ì§€ê³  ì½”ë“œë¥¼ ë³€ê²½í•˜ê¸° ì–´ë ¤ì›Œì§„ë‹¤.  
> ë°ì´í„°ê°€ ì•„ë‹Œ `ì±…ì„ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ê³„`í•´ì•¼ ì´ë¥¼ ë°©ì§€í•˜ëŠ”ë°, `ì–´ë–¤ ê°ì²´ì—ê²Œ ì–´ë–¤ ì±…ì„ì„ í• ë‹¹í• ì§€ ê²°ì •í•˜ëŠ” ê²ƒ`ì´ ì–´ë µë‹¤.  
> `GRASP íŒ¨í„´`ì„ í†µí•´ `ì±…ì„í• ë‹¹ ê¸°ì¤€`ì„ í•™ìŠµí•  ìˆ˜ ìˆë‹¤.

## ì±…ì„ ì£¼ë„ ì„¤ê³„ë¥¼ í–¥í•´

- ë°ì´í„°ë³´ë‹¤ í–‰ë™ì„ ë¨¼ì € ê²°ì •í•˜ë¼
- í˜‘ë ¥ì´ë¼ëŠ” ë¬¸ë§¥ ì•ˆì—ì„œ ì±…ì„ì„ ê²°ì •í•˜ë¼.

### ë°ì´í„°ë³´ë‹¤ í–‰ë™ì„ ë¨¼ì € ê²°ì •í•˜ë¼.

ê°ì²´ì—ê²Œ ì¤‘ìš”í•œ ê²ƒì€ ì™¸ë¶€ì— ì œê³µí•˜ëŠ” `í–‰ë™`. í´ë¼ì´ì–¸íŠ¸ ê´€ì ì—ì„  `í–‰ë™`ì´ ë°”ë¡œ `ì±…ì„`

### í˜‘ë ¥ì´ë¼ëŠ” ë¬¸ë§¥ ì•ˆì—ì„œ ì±…ì„ì„ ê²°ì •í•˜ë¼.

> í˜‘ë ¥ì— ì–´ìš¸ë¦¬ëŠ” ì±…ì„ì´ ì¢‹ì€ ì±…ì„ì´ë‹¤.

ë©”ì‹œì§€ ì „ì†¡ìì˜ ì˜ë„ì— ì í•©í•œ ì±…ì„ì„ í• ë‹¹í•´ì•¼í•œë‹¤.

```
â—
ë©”ì‹œì§€ ì „ì†¡ìê°€ ì–´ë–¤ í–‰ë™ì„ í†µí•´ (ê·¸ ì˜ë„) ë©”ì‹œì§€ë¥¼ ë°œí–‰(ìƒì„±) í•˜ë©´. ì–´ë–¤ ê°ì²´ê°€ ê·¸ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ (ì´í•´) í•  ìˆ˜ ìˆê³ ..
 ì´ë•Œì˜ í• ë‹¹ì´ ì í•©í•œ ì±…ì„
```

ë©”ì‹œì§€ ì†¡ì‹ ìëŠ” ë©”ì‹œì§€ ìˆ˜ì‹ ìì— ëŒ€í•´ ì–´ë–¤ ê°€ì •ë„ í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ìº¡ìŠí™”ì˜ ì›ë¦¬ë¥¼ ì§€í‚¤ê¸° í›¨ì”¬ ì‰¬ì›Œì§„ë‹¤.

### ì±…ì„ ì£¼ë„ ì„¤ê³„

```
- ì‹œìŠ¤í…œì´ ì‚¬ìš©ìì—ê²Œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì¸ ì‹œìŠ¤í…œ ì±…ì„ì„ íŒŒì•…í•œë‹¤
- ì‹œìŠ¤í…œ ì±…ì„ì„ ë” ì‘ì€ ì±…ì„ìœ¼ë¡œ ë¶„í• í•œë‹¤.
- ë¶„í• ëœ ì±…ì„ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ì ì ˆí•œ ê°ì²´ ë˜ëŠ” ì—­í• ì„ ì°¾ì•„ ì±…ì„ì„ í• ë‹¹í•œë‹¤.
- ê°ì²´ê°€ ì±…ì„ì„ ìˆ˜í–‰í•˜ëŠ” ë„ì¤‘ ë‹¤ë¥¸ ê°ì²´ì˜ ë„ì›€ì´ í•„ìš”í•œ ê²½ìš° ì´ë¥¼ ì±…ì„ì§ˆ ì ì ˆí•œ ê°ì²´ ë˜ëŠ” ì—­í• ì„ ì°¾ëŠ”ë‹¤.
- í•´ë‹¹ ê°ì²´ ë˜ëŠ” ì—­í• ì—ê²Œ ì±…ì„ì„ í• ë‹¹í•¨ìœ¼ë¡œì¨ ë‘ ê°ì²´ê°€ í˜‘ë ¥í•˜ê²Œ í•œë‹¤.
```

## ì±…ì„ í• ë‹¹ì„ ìœ„í•œ GRASP íŒ¨í„´

**GRASP**

- ì¼ë°˜ì ì¸ ì±…ì„ í• ë‹¹ì„ ìœ„í•œ ì†Œí”„íŠ¸ì›¨ì–´ íŒ¨í„´
- ê°ì²´ì— ì±…ì„ì„ í• ë‹¹í•  ë•Œ ì§€ì¹¨ìœ¼ë¡œ ì‚¼ì„ ìˆ˜ ìˆëŠ” ì›ì¹™ì˜ ì§‘í•©

### ë„ë©”ì¸ ê°œë…ì—ì„œ ì¶œë°œí•˜ê¸°

> ì„¤ê³„ë¥¼ ì‹œì‘í•˜ê¸° ì „ì— ë„ë©”ì¸ì— ëŒ€í•œ ê°œëµì ì¸ ëª¨ìŠµì„ ê·¸ë ¤ ë³´ëŠ” ê²ƒì´ ìœ ìš©í•˜ë‹¤.

> ì˜¬ë°”ë¥¸ ë„ë©”ì¸ ëª¨ë¸ì´ë€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ë„ë©”ì¸ ëª¨ë¸ê³¼ êµ¬í˜„ì˜ ê°œë…ì€ ë°€ì ‘í•œ ê´€ë ¨ì´ ìˆë‹¤.  
> ë„ë©”ì¸ ëª¨ë¸ì€ êµ¬í˜„ì„ ì—¼ë‘ì— ë‘ê³  êµ¬ì¡°í™”ë˜ëŠ” ê²ƒì´ ë°”ëŒì§í•˜ë‹¤.

## ì •ë³´ ì „ë¬¸ê°€ì—ê²Œ ì±…ì„ì„ í• ë‹¹í•˜ë¼.

ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì œê³µí•´ì•¼ í•˜ëŠ” ê¸°ëŠ¥ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì±…ì„ìœ¼ë¡œ ìƒê°í•˜ë¼.

**ë©”ì‹œì§€ë¥¼ ê²°ì •í• ë•Œ ê³ ë ¤í•  ì **

1. ë©”ì‹œì§€ë¥¼ ì „ì†¡í•  ê°ì²´ëŠ” ë¬´ì—‡ì„ ì›í•˜ëŠ”ê°€?
2. ë©”ì‹œì§€ ìˆ˜ì‹ ì— ì í•©í•œ ê°ì²´ëŠ” ëˆ„êµ¬ì¸ê°€?

### INFORMATION EXPERT

- ì±…ì„ì„ ìˆ˜í–‰í•˜ëŠ” ë° í•„ìš”í•œ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê°ì²´

ìŠ¤ìŠ¤ë¡œ ì²˜ë¦¬í•  ìˆ˜ ì—†ëŠ” ì‘ì—…ì´ ìˆë‹¤ë©´, ì™¸ë¶€ì— ë„ì›€ì„ ìš”ì²­í•´ì•¼ í•œë‹¤. ì´ ì™¸ë¶€ì— ëŒ€í•œ ìš”ì²­ì´ `ë©”ì‹œì§€`ê°€ ëœë‹¤.

```
â—
í•œê°œì˜ INFORMATION EXPERTê°€ ìì‹ ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³ , ë„ì›€ì´ í•„ìš”í•  ë•Œ ë©”ì‹œì§€ë¥¼ ë°œí–‰í•˜ê³  ìƒˆë¡œìš´ INFORMATION EXPERTê°€ ì´ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ì—¬ ìì‹ ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤. ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë ë•Œê¹Œì§€ ë°˜ë³µ
```

### ë†’ì€ ì‘ì§‘ë„ì™€ ë‚®ì€ ê²°í•©ë„

> ì—¬ëŸ¬ í˜‘ë ¥ íŒ¨í„´ ì¤‘ì—ì„œ, ë†’ì€ ì‘ì§‘ë„ì™€ ë‚®ì€ ê²°í•©ë„ë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ” ì„¤ê³„ë¥¼ ì„ íƒí•´ì•¼í•œë‹¤.

**LOW COUPLING**

- ë„ë©”ì¸ ì‚¬ì´ì˜ í˜‘ë ¥êµ¬ì¡°ì—ì„œ ì¶”ê°€ ë³µì¡ë„ê°€ ìƒê¸°ì§€ ì•ŠëŠ” ì„¤ê³„

**HIGH COHESION**

- ì±…ì„ì§€ì ì˜ ë‹¨ì¼í™”

### ì°½ì¡°ìì—ê²Œ ê°ì²´ ìƒì„± ì±…ì„ì„ í• ë‹¹í•˜ë¼.

ì–´ë–¤ ê°ì²´ì—ê²ŒëŠ” ê°ì²´ ìƒì„±ì— ì±…ì„ì´ í• ë‹¹ëœë‹¤. ì´ ë•Œ, CREATOR íŒ¨í„´ì€ ì´ ì±…ì„ì„ ì–´ë–¤ ê°ì²´ì— í• ë‹¹í• ì§€ì— ëŒ€í•œ ì§€ì¹¨ì„ ì œê³µí•œë‹¤.

**CREATOR íŒ¨í„´**

- ê°ì²´ë¥¼ í¬í•¨í•˜ê±°ë‚˜ ì°¸ì¡°í•œë‹¤.
- ê°ì²´ë¥¼ ê¸°ë¡í•œë‹¤
- ê°ì²´ë¥¼ ê¸´ë°€í•˜ê²Œ ì‚¬ìš©í•œë‹¤
- ê°ì²´ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ë° í•„ìš”í•œ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆë‹¤.
  > ì´ ì¡°ê±´ì„ ìµœëŒ€í•œ ë§Œì¡±í•˜ëŠ” ê°ì²´ê°€ ê°ì²´ ìƒì„±ì˜ ì±…ì„ì„ ê°–ëŠ”ê²Œ ë°”ëŒì§í•˜ë‹¤. ë‘ ê°ì²´ëŠ” `ê²°í•©ë  ìˆ˜ ë°–ì— ì—†ë‹¤.`

## êµ¬í˜„ì„ í†µí•œ ê²€ì¦

```
â“
ì™œ Screeningì„ êµ¬í˜„í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‹œì‘í–ˆëŠ”ê°€?
ì˜í™” ì˜ˆë§¤ í”„ë¡œê·¸ë¨ì´ë¼ë©´, Movieë‚˜ Reservation í•˜ë‹¤ëª»í•´ ì†Œë¹„ìì—ì„œ ì¶œë°œí•˜ëŠ”ê²Œ ì§ê´€ì ì´ì§€ ì•Šë‚˜?

?? í˜‘ë ¥ì˜ ì‹œì‘ ë©”ì‹œì§€ë¥¼ 'ì˜ˆë§¤í•˜ë¼' ë¼ê³  ì •ì˜í–ˆë‹¤ë©´, ìˆ˜ì‹ ìëŠ” ìƒì˜ì´ ì•„ë‹ˆë¼ ì†Œë¹„ìê°€ ì í•©í•˜ì§€ ì•Šë‚˜?

=> ì‚¬ëŒë§ˆë‹¤ ë‹¤ë¥¸ê²ƒê°™ë‹¤.. í† ì˜í•´ë³´ë‹ˆ ì´ê²Œ ì§ê´€ì ì¸ ì‚¬ëŒë„ ìˆì—ˆë‹¤.

```

```java
public class Screening{
  public Reservation reserve(Customer customer, int audienceCount){
  }
}
```

```java
public class Screening{
  private Movie movie;
  private int sequence;
  private LocalDateTime whenScreened;

  public Reservation reserve(Customer customer, int audienceCount){
  }
```

```
ğŸ’¬â“
ì±…ì„ì˜ ì¼ë¶€ë§Œ ì •ì˜í–ˆëŠ”ë°,
ì „ì²´ ì‹œìŠ¤í…œì—ì„œ ì²˜ë¦¬í•´ì•¼í•  ë©”ì‹œì§€ì™€ ì´ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•  ê°ì²´ë¥¼ ì •ì˜í•˜ê¸° ì „ì—, ìƒíƒœì™€ ê·¸ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë“¤ì„ ì •ì˜í•˜ëŠ”ê²Œ ë§ëŠ” ë°©í–¥ì¸ê°€?
'ë©”ì‹œì§€'ê°€ ì¤‘ìš”í•˜ì§€ ì•Šì•˜ë‚˜?
```

```java
public class Screening{
  private Movie movie;
  private int sequence;
  private LocalDateTime whenScreened;

  public Reservation reserve(Customer customer, int audienceCount){
    return new Reservation(customer, this, calculateFee(audienceCount,audienceCount));
  }

  private Money calculateFee(int audienceCount){
    return movie.calculateMovieFee(this).times(audienceCount);
  }
}
```

`movie.calculateMovieFee(Screening::)`ì— ìœ ì˜í•˜ë¼. movieì— ì–´ë–¤ ìˆ˜ì •ì„ ê°€í•˜ë”ë¼ë„, Screeningì€ ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.

```
ğŸ’¬â“
ë°˜ëŒ€ë¡œ, movieëŠ” screeningì˜ ì˜í–¥ì„ ë°›ê²Œ ëœê²ƒ ì•„ë‹Œê°€?
ì„¤ê³„ì ìœ¼ë¡œëŠ” ì±…ì—ì„œ ì„¤ëª…í•œ ë°©í–¥ì„±ì´ ë§ë‹¤ê³¤ ìƒê°í•˜ì§€ë§Œ
ì´ë¶€ë¶„ì— ëŒ€í•´ì„œ ì¡°ê¸ˆ ì–¸ê¸‰í•´ì£¼ì—ˆìœ¼ë©´ ì¢‹ì•˜ì„ ê²ƒ ê°™ë‹¤.

```

```java
public class Movie{
  private String title;
  private Duration runningTime;
  private Money fee;
  private List<DiscountCondition> discountContidions;

  private MovieType movieType;
  private Money discountAmount;
  private double discountPercent;

  public Money calculateMovieFee(screening screening){
  }
}
```

```java
public enum MovieType{
  AMOUNT_DISCOUNT,
  PERCENT_DISCOUNT,
  NONE_DISCOUNT
}
```

```
ğŸ’¬
MovieTypeì´ë¼ëŠ” ì´ë¦„ì´ ë¬´ì²™ì´ë‚˜ ë¶ˆí¸í•˜ë‹¤. ìš”ì†Œë“¤ì€ MovieTypeì— ë”°ë¥¸ í• ì¸ì •ì±…ì´ì§€ ì•Šë‚˜? enumíƒ€ì…ì˜ ë‚´ë¶€ fieldë¡œ policyë¥¼ ê°–ëŠ”ë‹¤ë©´ ë‚©ë“í• ìˆ˜ ìˆì„ ê²ƒ ê°™ì€ë°....
```

```java
public class Movie{

  public Money calculateMovieFee(screening screening){
    if(isDiscountable(screening)){
      return fee.minus(calculateDiscountAmount());
    }
    return fee;
  }

  private boolean isDiscountable(Screening screening){
    return discountConditions.stream()
            .anyMatch(condition -> condition.isSatisfiedBy(screening));
  }
}
```

```java
public class Movie{
  private Money calculateDiscountAmount(){
    switch(movieType){
      case AMOUNT_DISCOUNT:
        return calculateAmountDiscountAmount();
      case PERCENT_DISCOUNT:
        return calculatePercentDiscountAmount();
      case NONE_DISCOUNT:
        return calculateNoneDiscountAmount();
    }

    throw new IllegalStateException();
  }

  private Money calculateAmountDiscountAmount(){
    return discountAmount;
  }

  private Money calculatePercentDiscountAmount(){
    return fee.times(discountPercent);
  }

  private Money calculateNoneDiscountAmount(){
    return Money.ZERO;
  }
}
```

```
ğŸ’¬ Think
Movieê°€ MovieTypeì— ì§€ë‚˜ì¹˜ê²Œ ê°•ê²°í•©ë˜ì–´ìˆëŠ”ê²ƒê°™ë‹¤. MovieTypeì´ ëŠ˜ì–´ë‚˜ê±°ë‚˜, ì¤„ì–´ë“œëŠ” ê²½ìš° í˜¹ì€ ì˜ë¯¸ê°€ ë³€ê²½ë˜ëŠ” ê²½ìš° Movieì½”ë“œê°€ ì•ˆì „í•˜ì§€ ì•Šë‹¤ê³  ëŠë‚€ë‹¤.

-> p.151 DiscountCondition ê°œì„ í•˜ê¸°
```

```java
public class DiscountCondition{
  private DiscountConditionType type;
  private int sequence;
  private DayOfWeek dayOfWeek;
  private LocalTime startTime;
  private LocalTime endTime;

  public boolean isSatisfiedBy(Screening screening){
    if(type == DiscountConditionType.PERIOD){
      return isSatisfiedByPeriod(screening);
    }
    return isSatisfiedBySequence(screening);
  }

  public boolean isSatisfiedByPeriod(Screening screening){
    return dayOfWeek.equals(screening.getWhenScreened().getDayOfWeek())&&
      startTime.compareTo(screening.getWhenScreened().toLocalTime())<=0 &&
      endTime.isAfter(screening.getWhenScreened().toLocalTime())>=0;
  }

  private boolean isSatisfiedBySequence(Screening screening){
    return sequence == screening.getSequence();
  }

}

```

```java
public class Screening{
  public LocalDateTime getWhenScreened(){
    return whenScreened;
  }

  public int getSequence(){
    return sequence;
  }
}
```

```java
public enum DiscountConditionType{
  SEQUENCE,
  PERIOD
}
```

### DiscountCondition ê°œì„ í•˜ê¸°

ìœ„ ì‘ì„±í•œ ì½”ë“œëŠ” `ë³€ê²½ì— ì·¨ì•½`í•˜ë‹¤.  
ì˜ˆë¥¼ ë“¤ì–´, DiscountConditionì€ ì•„ë˜ ë³€ê²½ì— ì·¨ì•½í•˜ë‹¤.

- ìƒˆë¡œìš´ í• ì¸ì¡°ê±´ ì¶”ê°€
  - isSatisfiedBy ë©”ì„œë“œ ìˆ˜ì •í•´ì•¼í•œë‹¤.
- ìˆœë²ˆ ì¡°ê±´ì„ íŒë‹¨í•˜ëŠ” ë¡œì§ ë³€ê²½
  - isSatisfiedBySequence ë©”ì„œë“œ ìˆ˜ì •í•´ì•¼í•œë‹¤.
  - sequence ì†ì„±ë˜í•œ ë³€ê²½í•´ì•¼í•  ìˆ˜ ìˆë‹¤.
- ê¸°ê°„ ì¡°ê±´ì„ íŒë‹¨í•˜ëŠ” ë¡œì§ ë³€ê²½
  - isSatisfiedByPeriod ë©”ì„œë“œ êµ¬í˜„ì„ ìˆ˜ì •í•´ì•¼í•œë‹¤.

> `í•˜ë‚˜ ì´ìƒì˜ ë³€ê²½ ì´ìœ `ë¥¼ ê°€ì§€ê¸° ë•Œë¬¸ì— `ì‘ì§‘ë„ê°€ ë‚®ë‹¤.` **`ë³€ê²½ ì´ìœ ì— ë”°ë¼ í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•´ì•¼í•œë‹¤.`**

```
â— ë³€ê²½ ì´ìœ ì— ë”°ë¼ í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•´ì•¼í•œë‹¤ëŠ” ê²ƒì´ ì„¤ê³„ì— ë§¤ìš° ì¤‘ìš”í•œ ì›ì¹™ê°™ë‹¤.
```

> ì„¤ê³„ë¥¼ ê°œì„ í•˜ëŠ” ì‘ì—…ì€, ë³€ê²½ì˜ ì´ìœ ê°€ í•˜ë‚˜ ì´ìƒì¸ í´ë˜ìŠ¤ë¥¼ ì°¾ëŠ” ê²ƒë¶€í„° ì‹œì‘í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

**ë³€ê²½ì˜ ì´ìœ ê°€ í•˜ë‚˜ ì´ìƒì¸ ì§€ì ì„ ì‹ë³„í•˜ëŠ” ë°©ë²•**

- ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ê°€ ì´ˆê¸°í™” ë˜ëŠ” ì‹œì 
  - > ì†ì„±ì´ ì´ˆê¸°í™”ë˜ì•¼í•˜ëŠ” ì‹œì ì´ ë™ì¼í•œê°€?
  - í•¨ê»˜ ì´ˆê¸°í™”ë˜ëŠ” ì†ì„±ì„ ê¸°ì¤€ìœ¼ë¡œ ì½”ë“œë¥¼ ë¶„ë¦¬í•´ì•¼ í•œë‹¤.
- ë©”ì„œë“œë“¤ì´ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹
  - > ê°ê°ì˜ ë©”ì„œë“œê°€ ì†ì„±ì„ ì–¼ë§ˆë‚˜ ë§ì´ ì‚¬ìš©í•˜ëŠ”ê°€?
  - ì†ì„± ê·¸ë£¹ê³¼ í•´ë‹¹ ê·¸ë£¹ì— ì ‘ê·¼í•˜ëŠ” ë©”ì„œë“œ ê·¸ë£¹ì„ ê¸°ì¤€ìœ¼ë¡œ ì½”ë“œë¥¼ ë¶„ë¦¬í•´ì•¼ í•œë‹¤.

> í´ë˜ìŠ¤ì˜ ì‘ì§‘ë„ íŒë‹¨í•˜ê¸°
>
> - í´ë˜ìŠ¤ê°€ í•˜ë‚˜ ì´ìƒì˜ ì´ìœ ë¡œ ë³€ê²½ë˜ì–´ì•¼ í•˜ëŠ”ê°€
> - í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™” í• ë•Œ, ê°ê°ì˜ ì†ì„±ë“¤ì´ ì´ˆê¸°í™”ë˜ì–´ì•¼ í•˜ëŠ” ì‹œì ì´ ê°™ì€ê°€?
> - ë©”ì„œë“œ ê·¸ë£¹ì´, ì†ì„± ê·¸ë£¹ì„ ì‚¬ìš©í•˜ëŠ”ì§€ì— ë”°ë¼ ë‚˜ë‰˜ëŠ”ê°€?

DiscountConditionì€ ì´ ì„¸ê°€ì§€ ì¡°ê±´ì—ì„œ ëª¨ë‘ ì ì‹ í˜¸. ë”°ë¼ì„œ ì—¬ëŸ¬ê°œì˜ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ì„¤ê³„ì´ë‹¤.

### íƒ€ì… ë¶„ë¦¬í•˜ê¸°

ê°€ì¥ í° ë¬¸ì œëŠ” ìˆœë²ˆ ì¡°ê±´ê³¼ ê¸°ê°„ ì¡°ê±´ì´ë¼ëŠ” ë‘ê°œì˜ ë…ë¦½ì ì¸ íƒ€ì…ì´ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ ì•ˆì— ì¡´ì¬í•œë‹¤ëŠ” ì .

```java
public class PeriodCondition{
  private DayOfWeek dayOfWeek;
  private LocalTime startTime;
  private LocalTime endTime;

  public PeriodCondition(DayOfWeek dayOfWeek, LocalTime startTime, LocalTime endTime){
    this.dayOfWeek = dayOfWeek;
    this.startTime = startTime;
    this.endTime = endTime;
  }

  public boolean isSatisfiedBy(Screening screening){
    return dayOfWeek.equals(screening.getWhenScreened().getDayOfWeek())&&
      startTime.compareTo(screening.getWhenScreened().toLocalTime())<=0 &&
      endTime.compareTo(screening.getWhenScreened().toLocakTime()>=0);
  }
}
```

```java
public class SequenceCondition{
  private int sequence;

  public SequenceCondition(int sequence){
    this.sequence = sequence;
  }

  public boolean isSatisfiedBy(Screening screening){
    return sequence == screening.getSequence();
  }
}
```

ë‘ê°œì˜ Condition í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ë‹ˆ  
Movie ê°ì²´ê°€ ë‘ê°œì˜ Condition ê°ì²´ë¥¼ ì•Œì•„ì•¼í•˜ëŠ” ìƒˆë¡œìš´ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.

### ë‹¤í˜•ì„±ì„ í†µí•´ ë¶„ë¦¬í•˜ê¸°

```java
public interface DiscountCondition{
  boolean isSatisfiedBy(Screening screening);
}

```

### ë³€ê²½ìœ¼ë¡œë¶€í„° ë³´í˜¸í•˜ê¸°

ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬ì²´ íƒ€ì…ì„ ìº¡ìŠí™”í•˜ì—¬ ë³€ê²½ê³¼ í™•ì¥ì— ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•  ìˆ˜ ìˆë‹¤.

### Movie í´ë˜ìŠ¤ ê°œì„ í•˜ê¸°

Movie í´ë˜ìŠ¤ë„ ê¸ˆì•¡í• ì¸ ì˜í™”ì™€ ë¹„ìš©í• ì¸ ì •ì±… ì˜í™”ë¼ëŠ” ë‘ê°€ì§€ íƒ€ì…ì„ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ ì•ˆì— êµ¬í˜„í•˜ê³  ìˆê¸° ë•Œë¬¸ì— í•˜ë‚˜ ì´ìƒì˜ ì´ìœ ë¡œ ë³€ê²½ë  ìˆ˜ ìˆë‹¤. `ì‘ì§‘ë„ê°€ ë‚®ë‹¤`

```java
public abstract class Movie{
  private String title;
  private Duration runningTime;
  private Money fee;
  private List<DiscountCondition> discountConditions;

  public Movie(String title, Duration runningTime, Money fee, DiscountCondition... discountConditions){
    this.title = title;
    this.runningTime = runningTime;
    this.fee = fee;
    this.discountConditions = Arrays.asList(discountConditions);
  }

  public Money calculateMovieFee(Screening screening){
    if(isDiscountable(screening)){
      return fee.minus(calculateDiscountAmount());
    }
    return fee;
  }

  private boolean isDiscountable(Screening screening){
    return discountConditions.stream().anyMatch(condition -> condition.isSatisfiedBy(screening));
  }

  abstract protected Money calculateDiscountAmount();
}
```

```java
public class AmountDiscountMovie extends Movie{
  private Money discountAmount;

  public AmountDiscountMovie(String title, Duration runningTime, Money fee, Money discountAmount, DiscountCondition... discountConditions){
    super(title,runningTime, fee, discountConditions);
    this.discountAmount = discountAmount;
  }
}
```

```java
public class PercentDiscountMovie extends Movie{
  private double percent;

  public PercentDiscountMovie(String title, Duration runningTime, Money fee, double percent, DiscountCondition... discountConditions){
    super(title, runningTime, fee, discountConditions);
    this.percent = percent;
  }

  @Override
  protected Money calculateDiscountAmount(){
    return getFee().times(percent);
  }
}

```

### ë³€ê²½ê³¼ ìœ ì—°ì„±

## ì±…ì„ ì£¼ë„ ì„¤ê³„ì˜ ëŒ€ì•ˆ

**ë¦¬í™í„°ë§**

- ê²‰ìœ¼ë¡œ ë³´ì´ëŠ” ë™ì‘ì€ ë°”ê¾¸ì§€ ì•Šì€ ì±„ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒ

### ë©”ì„œë“œ ì‘ì§‘ë„

### ê°ì²´ë¥¼ ììœ¨ì ìœ¼ë¡œ ë§Œë“¤ì

###
